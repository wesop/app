# Schuedule Flow


## 직원의 근무 일정 정하기

* 근무 일정
	* 일(0) ~ 토(6) 까지 정할 수 있음
	* 00:00 ~ 23:59 까지 정할 수 있음
		* EMP_SCHEDULE_INFO 테이블에 저장
			* EMP_SCH_SEQ
			* EMP_SEQ
			* ATTENDANCE_TIME
			* WORK_OFF_TIME
			* USE_FLAG
			* CREATE_TIME
			* REG_DATE
			* START
			* END
---

## 직원의 출근

* QR 코드를 촬영하여 출근 처리
	* 촬영 전, 직원의 일정을 가져옴
	* 촬영 날짜가 일정에 속해 있으면(날짜, 요일, 시간 일치) 서버에 출근 요청
	* 위경도가 맞으면 출근 처리
		* 지각 : QR촬영시간 > 출근시간
---

## 직원의 퇴근

* QR 코드를 촬영하여 퇴근 처리
	* 촬영 전, 직원의 일정을 가져옴
	* 촬영 날짜가 일정에 속해 있으면(날짜, 요일, 시간 일치) 서버에 퇴근 요청
	* 위경도가 맞으면 퇴근 처리
		* 조퇴 : QR촬영시간 < 퇴근시간
	* 현재 문제
		* 출근시간 자정 이전이고 퇴근시간이 자정이후인 경우 퇴근을 할 수 없음
			* 출근을 하면 SCHEDULE 테이블에 새로운 레코드를 생성, 퇴근요청을 하면 퇴근요청했던 시간을 가지고 출근 레코드를 찾는데, 자정이 넘어가면 출근 레코드를 찾을 수가 없음
---

## 근태 상태 종류

* 출근예정 : 현재 시간이 출근일정보다 이전일 경우
* 근무중 : QR출근을 했고 퇴근일정(퇴근)이 지나지 않았을 경우
* 퇴근 : 퇴근일정 시간이 지났을 경우(퇴근일정 지나면 무조건 퇴근)
* 지각 : "QR촬영시간 > 출근일정시간"일 경우
* 조퇴 : "QR촬영시간 < 퇴근일정시간"일 경우
	* 조퇴의 경우 퇴근 상태와 같이 보여야함
* 결근 : QR출퇴근 기록이 아예 없는 경우
* 초과 : 예정근무시간보다 초과된 변경근무시간일 경우
	* 예)
		* 예정근무시간 : 15:00 ~ 18:00 (3시간)
		* 변경근무시간 : 15:00 ~ 19:00 (4시간) -> 초과

