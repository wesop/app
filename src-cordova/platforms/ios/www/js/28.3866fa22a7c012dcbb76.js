webpackJsonp([28],{"11Pi":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("5q7E"),n=(a("+J74"),a("bp97")),l=(a("B4Rf"),a("+bI7"),{name:"EmpStoreDetail",data:function(){return{show:"",storeSeq:"",empSeq:"",paytype:"",emp:null,visibleTimetableAddModal:!1,timeTable:null,selectedTimetable:null,moreButtons:[],sliderIndex:0,images:[]}},watch:{visibleTimetableAddModal:function(e){e||(this.selectedTimetable=null)}},methods:{getEmp:function(e){return i.a.get2(e)},getEmpSchedules:function(){return i.a.getSchedules(this.empSeq)},showHelpTimeTable:function(){},removeTimetable:function(){var e=this;this.showAlert("한 번 삭제하면 다시 등록해야 합니다.\n정말로 삭제하시겠습니까?",{cancel:"취소",confirm:"삭제"}).then(function(t){if(t){var a=e.timeTable.selected.schedules;a.forEach(function(e){return e&&(e.USE_FLAG="0")}),i.a.updateSchedules(a).then(function(){setTimeout(function(){e.showAlert("시간표를 삭제했습니다."),e.timeTable.delete(e.timeTable.index)},0)}).catch(function(){e.showAlert("시간표 삭제에 문제가 생겼습니다.")})}})},editTimetable:function(){this.selectedTimetable=this.timeTable.selected,this.visibleTimetableAddModal=!0},addTimetable:function(){this.selectedTimetable=null,this.visibleTimetableAddModal=!0},insertCompleteTimetable:function(e){this.timeTable.add(e)},updateCompleteTimetable:function(e){this.timeTable.update(e)}},created:function(){var e=this;console.log("route:",this.$route),this.show=this.$route.query.payShow,this.empSeq=this.$route.params.id,this.storeSeq=this.$route.query.storeSeq,this.getEmp(this.empSeq).then(function(t){console.log("get.emp:",t),e.emp=t[0],console.log("this.emp",e.emp),"2"==e.emp.PAY_TYPE?e.paytype="월급":"1"==e.emp.PAY_TYPE?e.paytype="일급":e.paytype="시급"}).catch(function(t){return e.showAlert(t.message)}),this.getEmpSchedules().then(function(t){e.timeTable=new n.a(t)}).catch(function(t){return e.showAlert(t.message)}),this.setHeader({visible:!0,title:"직원정보",useBackButton:!0})}}),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("section",{staticClass:"page-wrap"},[i("div",{staticClass:"field"},[i("div",{staticClass:"image-wrap huge"},[e.emp.images.length?i("img",{attrs:{src:"http://api.shop-sol.com/uploads/"+e.emp.images[0].IMAGE,alt:"emp_profile"}}):i("img",{attrs:{src:a("QDQH"),alt:"emp_profile"}})]),e._v(" "),i("div",{staticClass:"profile-wrap"},[i("div",{staticClass:"text name-wrap"},[e._v("\n          "+e._s(decodeURIComponent(e.emp.EMP_NAME))+"\n          "),i("small",{staticClass:"text-darkblue"},[e._v("\n            ("+e._s(0!=e.emp.IS_MANAGER?"매니저":"직원")+")\n          ")])]),e._v(" "),i("div",{staticClass:"text"}),e._v(" "),i("div",{staticClass:"text period-wrap"},[i("span",{staticClass:"text-darkblue"},[e._v("근무기간 : ")]),e._v(" "),null!=e.emp.END?i("span",{staticClass:"text-paleblue"},[e._v(e._s(e._f("dateFormat")(e.emp.START,"YYYY.MM.DD"))+" ~ "+e._s(e._f("dateFormat")(e.emp.END,"YYYY.MM.DD")))]):i("span",{staticClass:"text-paleblue"},[e._v(e._s(e._f("dateFormat")(e.emp.START,"YYYY.MM.DD"))+" ~"+e._s("계속"))])])])]),e._v(" "),i("div",{staticClass:"field"},[i("div",{staticClass:"label"},[e._v("\n        근무 일정\n        ")]),e._v(" "),e.timeTable?i("div",{staticClass:"time-table-wrapper"},[e.timeTable.list.length&&!e.timeTable.isFirst()?i("button",{staticClass:"btn btn-prev",attrs:{type:"button"},on:{click:function(t){e.timeTable.prev()}}},[i("q-icon",{attrs:{name:"keyboard_arrow_left",color:"paleblue",size:"2rem"}})],1):e._e(),e._v(" "),e.timeTable.list.length&&!e.timeTable.isLast()?i("button",{staticClass:"btn btn-next",attrs:{type:"button"},on:{click:function(t){e.timeTable.next()}}},[i("q-icon",{attrs:{name:"keyboard_arrow_right",color:"paleblue",size:"2rem"}})],1):e._e(),e._v(" "),e.isOwner?i("div",{staticClass:"editor-wrap"},[e.timeTable.list.length&&e.timeTable.isFuture()?i("button",{attrs:{type:"button"},on:{click:e.removeTimetable}},[i("q-icon",{attrs:{name:"delete_forever",color:"em",size:"1.5rem"}})],1):e._e(),e._v(" "),e.timeTable.list.length&&(e.timeTable.isFuture()||e.timeTable.isLast()||e.timeTable.isCurrent())?i("button",{attrs:{type:"button"},on:{click:e.editTimetable}},[i("q-icon",{attrs:{name:"edit",color:"blue",size:"1.5rem"}})],1):e._e(),e._v(" "),i("button",{attrs:{type:"button"},on:{click:e.addTimetable}},[i("q-icon",{attrs:{name:"add",color:"paleblue",size:"1.5rem"}})],1)]):e._e(),e._v(" "),e.timeTable.list.length?i("h4",[e._v("\n          "+e._s(e._f("dateFormat")(e.timeTable.selected.start,"YYYY.MM.DD"))+" ~ "+e._s(e._f("dateFormat")(e.timeTable.selected.end,"YYYY.MM.DD"))+"\n          "+e._s(e.timeTable.isCurrent()?"(현재)":"")+"\n        ")]):e._e(),e._v(" "),e.timeTable.list.length?i("Timetable",{attrs:{timeTable:e.timeTable.selected}}):e._e()],1):e._e()]),e._v(" "),"1"==e.show?i("div",{staticClass:"field"},[i("div",{staticClass:"label"},[e._v("근무형태 및 급여")]),e._v(" "),i("div",{staticClass:"text text-paleblue",attrs:{"text-right":""}},[i("span",[e._v(e._s(e.paytype)+" / ")]),e._v(" "),i("span",[e._v(e._s(e._f("currency")(e.emp.PAY)))])])]):e._e(),e._v(" "),i("div",{staticClass:"field"},[i("div",{staticClass:"label"},[e._v("급여지급일")]),e._v(" "),i("div",{staticClass:"text text-paleblue",attrs:{"text-right":""}},[e._v("\n        매월 "+e._s(e.emp.PAY_DAY)+"일\n      ")])])])])},r=[];s._withStripped=!0;var o=a("XyMi"),p=!1;var m=function(e){p||a("byYV")},d=Object(o.a)(l,s,r,!1,m,"data-v-85844564",null);d.options.__file="src/pages/EmpStoreDetail.vue";t.default=d.exports},"Nj/j":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.page-wrap[data-v-85844564] {\n  padding: 20px 23px 0;\n  color: #173c51;\n}\n.q-item[data-v-85844564] {\n  padding: 1.4em 1em 0;\n  font-size: 1em;\n}\n.image-wrap[data-v-85844564] {\n  display: inline-block;\n}\n.profile-wrap[data-v-85844564] {\n  display: inline-block;\n  vertical-align: top;\n  font-size: 1rem;\n}\n.profile-wrap .name-wrap[data-v-85844564] {\n  margin-top: 8px;\n  margin-bottom: 10px;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #173c51;\n}\n.profile-wrap .period-wrap[data-v-85844564] {\n  margin-top: 10px;\n  font-size: 0.7rem;\n}\n.field[data-v-85844564] {\n  margin: 0.7em 0;\n  padding-bottom: 0.5em;\n  border-bottom: 1px solid #aacedd;\n}\n.field .label[data-v-85844564] {\n  margin-left: 8px;\n  margin-bottom: 4px;\n  font-size: 0.9rem;\n  font-weight: 800;\n}\n.field .text[data-v-85844564] {\n  margin-left: 8px;\n}\n.field[data-v-85844564]:last-of-type {\n  border: 0;\n}\n.time-table-wrapper[data-v-85844564] {\n  padding-top: 1rem;\n  position: relative;\n}\n.time-table-wrapper .btn[data-v-85844564] {\n  position: absolute;\n  top: 1rem;\n  line-height: 36px;\n}\n.time-table-wrapper .btn.btn-prev[data-v-85844564] {\n  left: 0;\n}\n.time-table-wrapper .btn.btn-next[data-v-85844564] {\n  right: 0;\n}\n.time-table-wrapper .editor-wrap[data-v-85844564] {\n  position: absolute;\n  top: -1rem;\n  right: 0;\n}\n.time-table-wrapper .editor-wrap button[data-v-85844564] {\n  width: 30px;\n  height: 30px;\n}\n.time-table-wrapper h4[data-v-85844564] {\n  margin: 0;\n  text-align: center;\n  line-height: 36px;\n  font-size: 1rem;\n  color: #36aae9;\n}\n",""])},byYV:function(e,t,a){var i=a("Nj/j");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("rjj0").default)("5142dbda",i,!1,{})}});