webpackJsonp([26],{Kql6:function(e,t,a){var n=a("Xuhu");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("rjj0").default)("2e0a2bfb",n,!1,{})},Xuhu:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.page-wrap[data-v-e52fa6a8] {\n  padding: 20px 23px 0;\n  color: #173c51;\n}\n.image-wrap[data-v-e52fa6a8] {\n  display: inline-block;\n}\n.profile-wrap[data-v-e52fa6a8] {\n  display: inline-block;\n  line-height: 55px;\n  vertical-align: top;\n  font-size: 1rem;\n}\n.profile-wrap .name-wrap[data-v-e52fa6a8] {\n  margin-top: 8px;\n  margin-bottom: 10px;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #173c51;\n}\n.profile-wrap .period-wrap[data-v-e52fa6a8] {\n  margin-top: 10px;\n  font-size: 0.7rem;\n}\n.checkbox-wrap[data-v-e52fa6a8] {\n  margin-bottom: 0.5em;\n}\n.checkbox-wrap small[data-v-e52fa6a8] {\n  vertical-align: middle;\n}\n.checkbox-wrap.not-end-wrap[data-v-e52fa6a8] {\n  margin-top: 4px;\n  font-size: 0.9rem;\n}\ninput[data-v-e52fa6a8] {\n  padding: 0;\n  border: 0;\n  color: #36aae9;\n  outline: none;\n}\n.schedule-wrap[data-v-e52fa6a8] {\n  font-size: 1rem;\n}\n.btn-add-sch[data-v-e52fa6a8] {\n  width: 100%;\n  background-color: #9db6ca;\n  border: 0;\n  line-height: 44px;\n  font-size: 1rem;\n  color: #fff;\n}\n.schedule-wrap[data-v-e52fa6a8] {\n  clear: both;\n  margin: 0.7em 0;\n}\n.schedule-wrap .day-wrap[data-v-e52fa6a8] {\n  display: inline-block;\n  margin-right: 9px;\n  width: 34px;\n  height: 34px;\n  background: #36aae9;\n  text-align: center;\n  line-height: 34px;\n  border-radius: 50%;\n  color: #fff;\n}\n.schedule-wrap .time-wrap[data-v-e52fa6a8] {\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 1.2rem;\n}\n.schedule-wrap button[data-v-e52fa6a8] {\n  float: right;\n  padding: 0 12px;\n  height: 33px;\n  border: 0;\n  border-radius: 2px;\n  font-size: 0.9rem;\n  color: #fff;\n}\n.schedule-wrap button.btn-edit-schedule[data-v-e52fa6a8] {\n  margin-right: 5px;\n  background-color: #36aae9;\n}\n.schedule-wrap button.btn-remove-schedule[data-v-e52fa6a8] {\n  background-color: #ff5252;\n}\n.q-radio[data-v-e52fa6a8] {\n  float: left;\n  width: 50%;\n}\n.btn-update[data-v-e52fa6a8] {\n  position: fixed;\n  bottom: 0;\n  height: 58px;\n  z-index: 5999;\n}\n.pay-input-wrap[data-v-e52fa6a8] {\n  position: relative;\n}\n.pay-input-wrap select[data-v-e52fa6a8] {\n  position: absolute;\n  left: 0;\n  border: 0;\n  background: none;\n  color: #36aae9;\n  -webkit-appearance: none;\n  outline: none;\n}\n",""])},dMh7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5q7E"),l=a("+J74"),i=(a("B4Rf"),a("+bI7")),s={name:"EmployeeModify",data:function(){return{storeSeq:"",empSeq:"",emp:null,ismanager:"0",ischecked:"0",empSchedules:[],storefivetype:null,type:null,notEnd:"0",disabled:[],visibleCalendar:!1,calendarFlag:null,visibleTimeInput:!1,selectedSch:null,timeFlag:null,visibleScheduleAdd:!1,visibleHelp:!1,helpTitle:null}},watch:{"emp.PAY":function(e,t){e.length>7&&(this.emp.PAY=t)},"emp.PAY_DAY":function(e,t){e.length>2&&(this.emp.PAY_DAY=t)},"emp.PAY_SHOW":function(e,t){console.log(e),console.log(t),"1"==e?this.ischecked="1":(this.ischecked="0",this.emp.OTHERPAY_SHOW="0")},"emp.IS_MANAGER":function(e,t){console.log(e),this.ismanager="1"==e?"1":"0"},visibleScheduleAdd:function(){!1===this.visibleScheduleAdd&&(this.selectedSch=null)},notEnd:function(){"1"==this.notEnd&&(this.emp.END=null)},"emp.END":function(e,t){e&&(this.notEnd="0")}},computed:{sortedEmpSchedules:function(){return this.empSchedules.sort(function(e,t){return e.DAY-t.DAY})}},methods:{getEmp:function(){return n.a.get(this.empSeq)},getEmpSchedules:function(){return n.a.getSchedules(this.empSeq)},createEmpSchedule:function(){this.empSchedules.length>=7||((new i.b).EMP_SEQ=this.empSeq,this.visibleScheduleAdd=!0)},setSchedule:function(e,t,a){var n=this,l=this.selectedSch;l?(l.DAY=e[0],l.ATTENDANCE_TIME=t,l.WORK_OFF_TIME=a):e.forEach(function(e){var l=new i.b;l.EMP_SEQ=n.empSeq,l.DAY=e,l.ATTENDANCE_TIME=t,l.WORK_OFF_TIME=a,n.empSchedules.push(l)}),this.selectedSch=null},editEmpSchedule:function(e){this.selectedSch=e,this.visibleScheduleAdd=!0},removeEmpSchedule:function(e,t){void 0!=e.EMP_SCH_SEQ&&null!=e.EMP_SCH_SEQ&&-1!=e.EMP_SCH_SEQ?e.USE_FLAG="0":this.empSchedules=this.empSchedules.slice(0,t).concat(this.empSchedules.slice(t+1))},update:function(){var e=this;n.a.update(this.emp).then(function(){}).then(function(){e.showAlert("직원 정보를 수정했습니다.").then(function(){return e.back()})}).catch(function(t){return e.showAlert(t.message)})},updateSchedules:function(){var e=this;return this.empSchedules.forEach(function(t){if(t.START=e.emp.START.split(/\s/)[0],t.END=null,t.ATTENDANCE_TIME>t.WORK_OFF_TIME){var a=l.a.getTimeToHourMin(t.WORK_OFF_TIME),n=a.hour,i=a.min;n+=24,t.WORK_OFF_TIME=l.a.getHourMinToTime(n,i)}}),n.a.updateSchedules(this.empSchedules)},showCalendar:function(e){this.calendarFlag=e,this.visibleCalendar=!0},setDate:function(e){this.emp[this.calendarFlag]=e},showHelpModal:function(e){this.visibleHelp=!0,this.helpTitle=e}},created:function(){var e=this;this.empSeq=this.$route.params.id,this.emp=this.$route.query.emp,this.type=this.$route.query.type,this.storeSeq=this.$route.query.storeSeq,this.empSchedules=[],console.log("this.user:",this.user),console.log('M this.emp"',this.emp),console.log('M query.emp"',this.$route.query.emp),this.storefivetype=this.$route.query.storefivetype,this.emp.END||(this.notEnd="1"),this.emp.PAY_DAY||this.user.stores.some(function(t){if(t.STORE_SEQ==e.storeSeq)return e.emp.PAY_DAY=t.PAY_DAY,!0}),this.getEmpSchedules().then(function(t){e.empSchedules=[],(t=t.sort(function(e,t){return t.EMP_SCH_SEQ-e.EMP_SCH_SEQ})).some(function(t,a){var n=e.empSchedules[a-1];if(n&&n.REG_DATE!==t.REG_DATE)return!0;var i=l.a.getTimeToHourMin(t.WORK_OFF_TIME),s=i.hour,c=i.min;s>=24&&(s-=24,t.WORK_OFF_TIME=l.a.getHourMinToTime(s,c)),e.empSchedules.push(t)})}).catch(function(t){return e.showAlert(t.message)}),this.setHeader({visible:!0,title:"직원정보 수정",useBackButton:!0}),this.emp.PAY_TYPE||(this.emp.PAY_TYPE="0")}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{directives:[{name:"show",rawName:"v-show",value:e.emp,expression:"emp"}]},[n("div",{staticClass:"page-wrap"},[n("div",{staticClass:"field"},[n("div",{staticClass:"image-wrap huge"},[e.emp.images.length?n("img",{attrs:{src:"http://api.shop-sol.com/uploads/"+e.emp.images[0].IMAGE,alt:"emp_profile"}}):n("img",{attrs:{src:a("QDQH"),alt:"emp_profile"}})]),e._v(" "),n("div",{staticClass:"profile-wrap"},[n("div",{staticClass:"text name-wrap"},[e._v(e._s(decodeURIComponent(e.emp.EMP_NAME)))])])]),e._v(" "),0!=e.emp.TYPE?n("div",{staticClass:"accepted-wrap"},["1"===this.user.STORE?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("직책 및 권한")]),e._v(" "),n("div",{staticClass:"text"},[n("q-radio",{attrs:{"unchecked-icon":"radio_button_unchecked","checked-icon":"radio_button_checked",color:"paleblue",val:"0",label:"직원"},model:{value:e.emp.IS_MANAGER,callback:function(t){e.$set(e.emp,"IS_MANAGER",t)},expression:"emp.IS_MANAGER"}}),e._v(" "),n("q-radio",{attrs:{"unchecked-icon":"radio_button_unchecked","checked-icon":"radio_button_checked",color:"paleblue",val:"1",label:"매니저"},model:{value:e.emp.IS_MANAGER,callback:function(t){e.$set(e.emp,"IS_MANAGER",t)},expression:"emp.IS_MANAGER"}}),e._v(" "),n("div",[n("small",[e._v("* 매니저는 매장 직원의 출퇴근 및 급여(선택가능)를 확인할 수 있습니다.")])])],1)]):e._e(),e._v(" "),n("div",{staticClass:"field required"},[n("div",{staticClass:"label"},[e._v("근무시작 적용일")]),e._v(" "),n("div",{staticClass:"text",on:{click:function(t){e.showCalendar("START")}}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.emp.START,expression:"emp.START"}],attrs:{type:"text"},domProps:{value:e.emp.START},on:{input:function(t){t.target.composing||e.$set(e.emp,"START",t.target.value)}}}),e._v(" "),e.emp.START?n("span",[e._v(e._s(e._f("dateFormat")(e.emp.START,"YYYY년 MM월 DD일")))]):n("span",{staticClass:"text-gray"},[e._v("근무 적용일")])])]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("근무 종료일")]),e._v(" "),n("div",{staticClass:"text",on:{click:function(t){e.showCalendar("END")}}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.emp.END,expression:"emp.END"}],attrs:{type:"text"},domProps:{value:e.emp.END},on:{input:function(t){t.target.composing||e.$set(e.emp,"END",t.target.value)}}}),e._v(" "),e.emp.END?n("span",[e._v(e._s(e._f("dateFormat")(e.emp.END,"YYYY년 MM월 DD일")))]):n("span",{staticClass:"text-gray"},[e._v("근무 종료일")])]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap not-end-wrap"},[n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"근무종료일 없음","unchecked-icon":"check_box_outline_blank","checked-icon":"check_box",color:"paleblue"},model:{value:e.notEnd,callback:function(t){e.notEnd=t},expression:"notEnd"}})],1)]),e._v(" "),n("q-item-separator")],1),e._v(" "),"1"===this.user.STORE?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("\n           직원급여  노출여부\n        ")]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},[n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"선택시 본인급여 확인가능","unchecked-icon":"check_box_outline_blank","checked-icon":"check_box",color:"paleblue"},model:{value:e.emp.PAY_SHOW,callback:function(t){e.$set(e.emp,"PAY_SHOW",t)},expression:"emp.PAY_SHOW"}})],1)])]):e._e(),e._v(" "),"1"===this.user.STORE&&"1"==e.ismanager?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("\n           [매니저인 경우] 타직원급여 노출여부\n        ")]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},["0"==e.ischecked?n("q-checkbox",{attrs:{readonly:"","true-value":"1","false-value":"0",label:"선택시 타직원 급여 확인가능","unchecked-icon":"check_box_outline_blank","checked-icon":"check_box",color:"paleblue"},model:{value:e.emp.OTHERPAY_SHOW,callback:function(t){e.$set(e.emp,"OTHERPAY_SHOW",t)},expression:"emp.OTHERPAY_SHOW"}}):e._e(),e._v(" "),"1"==e.ischecked?n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"선택시 타직원 급여 확인가능","unchecked-icon":"check_box_outline_blank","checked-icon":"check_box",color:"paleblue"},model:{value:e.emp.OTHERPAY_SHOW,callback:function(t){e.$set(e.emp,"OTHERPAY_SHOW",t)},expression:"emp.OTHERPAY_SHOW"}}):e._e()],1)])]):e._e(),e._v(" "),"1"===this.user.STORE&&"1"==e.ismanager?n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("\n           [매니저인 경우] 일정수정 권한\n          ")]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},[n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"선택시 직원 일정 수정가능","unchecked-icon":"check_box_outline_blank","checked-icon":"check_box",color:"paleblue"},model:{value:e.emp.CalendarEdit,callback:function(t){e.$set(e.emp,"CalendarEdit",t)},expression:"emp.CalendarEdit"}})],1)])]):e._e(),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("\n          급여적용\n        ")]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},["1"===e.storefivetype?n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"3대 수당","unchecked-icon":"radio_button_unchecked","checked-icon":"radio_button_checked",color:"paleblue"},model:{value:e.emp.THREE_ALLOWANCE,callback:function(t){e.$set(e.emp,"THREE_ALLOWANCE",t)},expression:"emp.THREE_ALLOWANCE"}}):e._e(),e._v(" "),"1"===e.storefivetype?n("small",{on:{click:function(t){e.showHelpModal("3대 수당")}}},[e._v("* 3대 수당이란?")]):e._e()],1)]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},[n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"휴게시간","unchecked-icon":"radio_button_unchecked","checked-icon":"radio_button_checked",color:"paleblue"},model:{value:e.emp.REST_ALLOWANCE,callback:function(t){e.$set(e.emp,"REST_ALLOWANCE",t)},expression:"emp.REST_ALLOWANCE"}}),e._v(" "),n("small",{on:{click:function(t){e.showHelpModal("휴게시간")}}},[e._v("* 휴게시간이란?")])],1)]),e._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"checkbox-wrap"},[n("q-checkbox",{attrs:{"true-value":"1","false-value":"0",label:"주휴수당","unchecked-icon":"radio_button_unchecked","checked-icon":"radio_button_checked",color:"paleblue"},model:{value:e.emp.WEEKEND_ALLOWANCE,callback:function(t){e.$set(e.emp,"WEEKEND_ALLOWANCE",t)},expression:"emp.WEEKEND_ALLOWANCE"}}),e._v(" "),n("small",{on:{click:function(t){e.showHelpModal("주휴수당")}}},[e._v("* 주휴수당이란?")])],1)])]),e._v(" "),n("div",{staticClass:"field"},[n("div",[n("small",[e._v("* 2018년 최저시급은 "),n("span",{staticClass:"text-em"},[e._v("7,530원")]),e._v(" 입니다.")]),n("br")]),e._v(" "),n("div",{staticClass:"text-paleblue pay-input-wrap",attrs:{"text-right":""}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.emp.PAY_TYPE,expression:"emp.PAY_TYPE"}],attrs:{readonly:"readonly"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.emp,"PAY_TYPE",t.target.multiple?a:a[0])}}},[n("option",{attrs:{value:"0",selected:""}},[e._v("시급")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("일급")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("월급")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.emp.PAY,expression:"emp.PAY"}],attrs:{"text-right":"",min:"7530",color:"paleblue",type:"number",maxlength:"7",placeholder:"급여"},domProps:{value:e.emp.PAY},on:{input:function(t){t.target.composing||e.$set(e.emp,"PAY",t.target.value)}}}),e._v(" "),n("span",[e._v("원")])])]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[e._v("급여지급일")]),e._v(" "),n("div",{staticClass:"text text-paleblue",attrs:{"text-right":""}},[n("span",[e._v("매월 ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.emp.PAY_DAY,expression:"emp.PAY_DAY"}],attrs:{"text-right":"",type:"number",max:"31",min:"1",maxlength:"2",placeholder:"급여"},domProps:{value:e.emp.PAY_DAY},on:{input:function(t){t.target.composing||e.$set(e.emp,"PAY_DAY",t.target.value)}}}),e._v(" "),n("span",[e._v("일")])])])]):e._e()]),e._v(" "),e.emp.TYPE?n("q-btn",{staticClass:"btn-update full-width",attrs:{label:"직원정보 수정하기",color:"paleblue"},on:{click:e.update}}):e._e(),e._v(" "),n("CalendarModal",{on:{select:e.setDate},model:{value:e.visibleCalendar,callback:function(t){e.visibleCalendar=t},expression:"visibleCalendar"}}),e._v(" "),n("EmployeeScheduleAddModal",{attrs:{scheduleData:e.selectedSch},on:{set:e.setSchedule},model:{value:e.visibleScheduleAdd,callback:function(t){e.visibleScheduleAdd=t},expression:"visibleScheduleAdd"}}),e._v(" "),n("HelpSalaryModal",{attrs:{title:e.helpTitle},model:{value:e.visibleHelp,callback:function(t){e.visibleHelp=t},expression:"visibleHelp"}})],1)},o=[];c._withStripped=!0;var r=a("XyMi"),d=!1;var p=function(e){d||a("Kql6")},u=Object(r.a)(s,c,o,!1,p,"data-v-e52fa6a8",null);u.options.__file="src/pages/EmployeeModify.vue";t.default=u.exports}});